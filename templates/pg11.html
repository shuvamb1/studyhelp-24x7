<!DOCTYPE html>
 <html lang="en">
 <head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles1.css') }}">
     <title>StudyHelp 24x7</title>
 	<script async src="https://www.googletagmanager.com/gtag/js?id=G-B31J01CXSV"></script>
 <script>
   window.dataLayer = window.dataLayer || [];
   function gtag(){dataLayer.push(arguments);}
   gtag('js', new Date());
 
   gtag('config', 'G-B31J01CXSV');
 </script>
	 <style>
    /* Spinner Overlay */
    #spinner {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: #0d214e;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      color: white;
    }

    /* Circle Spinner */
    .circle-loader {
  width: 50px;
  height: 50px;
  border: 9px solid #5BC0DE;      /* Brand-themed navy border */
  border-top: 9px solid #0d214e;   /* Accent blue top border */
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-bottom: 20px;
}


    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    .dot-loader span {
      opacity: 0;
      animation: fadeDot 1s infinite;
    }

    .dot-loader span:nth-child(2) { animation-delay: 0.3s; }
    .dot-loader span:nth-child(3) { animation-delay: 0.6s; }

    @keyframes fadeDot {
      0%   { opacity: 0; }
      50%  { opacity: 1; }
      100% { opacity: 0; }
    }
  </style>
 </head>
 <body>
	 <div id="spinner">
		 <div class="circle-loader"></div>
  </div>
     <header style="font-family:Gagalin">
         <div id="logo">üåê STUDYHELP 24X7</div>
         <div class="auth-buttons" style="font-family:Gagalin">
         </div>
     </header>
     <main style="font-family:Gagalin">
 		<div style="height:91%;width:91%;padding:3%">
             <input type="text" id="queryInput" placeholder="Ask StudyHelp Bot" style="font-size:20px;padding:8px;border-radius: 5px;">
 			<button onclick="askDeepSeek()" style="font-family:Gagalin;color:white;">Ask</button>
 			<p id="response"></p>
 		</div>
         
 		<script>
			 // ‚úÖ Hide spinner once content is loaded
    window.addEventListener('load', () => {
      const spinner = document.getElementById('spinner');
      spinner.style.display = 'none';
    });

         function askDeepSeek() {
     let userQuery = document.getElementById("queryInput").value.trim();
	if (!userQuery) {
          	alert("Please enter a valid query!");
          	return;
      }
     let url = `https://studyhelp-24x7.onrender.com/ask_deepseek?query=${encodeURIComponent(userQuery)}&t=${new Date().getTime()}`;
 
     fetch(url)
         .then(response => {
             if (!response.ok) {
                 throw new Error("Network response was not OK");
             }
             return response.json(); // Parse JSON
         })
         .then(data => {
             if (data.choices) {
                 document.getElementById("response").innerText = data.choices[0].message.content;
		document.getElementById("queryInput").value = "";
             } else {
                 document.getElementById("response").innerText = "Error: Invalid response format!";
		document.getElementById("queryInput").value = "";
             }
         })
         .catch(error => {
             console.error("Error:", error);
             document.getElementById("response").innerText = "Error fetching response!";
         });
 }
 document.getElementById('logo').addEventListener('click', function() {
             window.location.href = 'https://shuvamb1.github.io/StudyHelp-24X7-/index1.html';
         });
    
     </script>
     </main>
 </body>
 </html>
